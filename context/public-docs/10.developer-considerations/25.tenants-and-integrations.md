---
title: Integrations with Tenants
description: Integrate third-party applications and MPC wallets with the Prividium™ Network.
---

Tenants enable trusted third-party applications (such as MPC wallet providers) to programmatically manage users and
access network data. This integration solves the visibility challenge where an external system manages multiple users
who each require privacy isolation on the network.

Admins effectively whitelist your application by creating a Tenant entity.

> [!NOTE] NOTE
>
> To set up a tenant, refer to the Manage Tenants section of the Admin Dashboard documentation.

## Authentication

Tenants authenticate using a Sign-In with Ethereum (SIWE) flow. You must sign a message with the Private Key
corresponding to the Public Key registered by the network administrator.

### 1. Request SIWE Message

Obtain a nonce and message to sign.

**Endpoint:** `POST /api/siwe-messages/tenants`

```bash
curl -X POST "$API_URL/api/siwe-messages/tenants" \
  -H "Content-Type: application/json" \
  -d '{ "address": "0xYourTenantPublicKey" }'
```

### 2. Exchange Signature for Token

Sign the received message using your wallet or signing library (e.g., Ethers.js, Viem, cast), then exchange it for a
JWT.

**Endpoint:** `POST /api/auth/login/tenant`

```bash
# Example using cast and jq
MSG="...message from step 1..."
# We have to convert to hash here, as cast would not parse end of lines correctly.
MSG=$(echo -n $MSG | xxd -p -c 999999)
SIGNATURE=$(cast wallet sign --private-key "$PRIVATE_KEY" "0x$MSG")

curl -X POST "$API_URL/api/auth/login/tenant" \
  -H "Content-Type: application/json" \
  -d "{ \"message\": \"$MSG\", \"signature\": \"$SIGNATURE\" }"
```

**Response:** Returns a Bearer token (`token`) used for subsequent API and RPC requests.

## API Key Authentication

For server-to-server integrations where SIWE signing is impractical, tenants can use API keys for authentication. API
keys provide a simpler authentication flow but require additional security configuration.

### Prerequisites

Before using API keys, the network administrator must:

1. Create an API key for your tenant in the Admin Dashboard.
2. Add your server's IP address(es) to the tenant's IP whitelist.

> [!IMPORTANT] IMPORTANT
>
> API key authentication requires IP whitelisting. Requests from non-whitelisted IPs are rejected, even with a valid API
> key.

### Using an API Key

Include the API key in the `x-api-key` header for all requests:

```bash
curl -X POST "$API_URL/api/tenant-actions/users" \
  -H "x-api-key: priv_sk_your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '{ "displayName": "New User", "walletAddresses": [{ "walletAddress": "0x..." }] }'
```

### RPC Requests with API Key

Use the same header for JSON-RPC requests:

```bash
curl -X POST "$RPC_URL" \
  -H "x-api-key: priv_sk_your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "eth_getBlockReceipts",
    "params": ["0x<blockHash>"]
  }'
```

### API Key Requirements

| Requirement  | Description                                                       |
| ------------ | ----------------------------------------------------------------- |
| Format       | Keys start with `priv_sk_` followed by 64 alphanumeric characters |
| Expiration   | Keys have an expiration date set at creation (max 1 year)         |
| IP Whitelist | Request IP must be in the tenant's whitelist                      |
| Status       | Key must not be revoked or expired                                |

> [!NOTE] NOTE
>
> If your server runs behind a proxy or load balancer, ensure the administrator has configured `TRUST_X_FORWARDED_FOR`
> correctly so Prividium sees your actual server IP, not the proxy IP.

## User Management APIs

> [!NOTE] NOTE
>
> You can find the full API reference in the API Reference section.

Use the Tenant Actions API to manage the users associated with your application. Authenticate all requests with
`Authorization: Bearer <YOUR_TOKEN>`.

### Create User

Create a new user. The user automatically inherits the default roles configured for your tenant.

- **POST** `/api/tenant-actions/users`
- **Body**:
  ```json
  {
    "displayName": "User Name",
    "walletAddresses": [{ "walletAddress": "0xUserWalletAddress" }]
  }
  ```

### Manage User Wallets

Associate wallet addresses with a specific user.

- **POST** `/api/tenant-actions/users/:userId/wallet`
- **Body**:
  ```json
  [{ "walletAddress": "0xNewWalletAddress" }]
  ```

### List Users

Retrieve a paginated list of your users.

- **GET** `/api/tenant-actions/users`

## RPC Interactions

When interacting with the Prividium™ JSON-RPC with a Tenant token, your data visibility differs from standard users.

### Data Visibility Rules

- **Standard User Token**: Can only see transactions and receipts involving their own address.
- **Tenant Token**: Can see transactions and receipts for **all** users managed by that tenant. This is the union of all
  individual user visibilities.

### Example: Fetch Block Receipts

To index activity for your users, call standard RPC methods using your tenant token.

```bash
curl -X POST "$RPC_URL" \
  -H "Authorization: Bearer $TENANT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "eth_getBlockReceipts",
    "params": ["0x<blockHash>"]
  }'
```

The response includes receipts for any transaction belonging to a user in your tenant group. Transactions unrelated to
your users remain hidden.
