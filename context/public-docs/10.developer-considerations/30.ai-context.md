---
title: AI Agent Guide for Prividiumâ„¢
description:
  Download or copy this document and use it as your AGENTS.md / CLAUDE.md to optimize AI agents working with Prividium.
downloadable: true
---

# AI Agent Guide: Building on Prividium

This document outlines the specific constraints and patterns required when building applications on Prividiumâ„¢ chains.
These chains differ significantly from standard EVM chains due to strict privacy and permissioning layers.

## ðŸš¨ CRITICAL DIFFERENCES (Read First, DO NOT IGNORE)

1.  **Everything is Permissioned**: There are NO public read nodes. Every interaction (read or write) requires
    authentication, unless a chain administrator manually allows a read method to be publicly accessible (NOT BY
    DEFAULT).
    - **Always** check if the user is authenticated (`prividium.isAuthorized()`) before attempting network operations.
      **Always** use the [`prividium` SDK](https://www.npmjs.com/package/prividium) to handle chain initialization and
      auth.
2.  **Two RPC Architectures**:
    - **Server/Scripts**: Use `Authorization: Bearer <token>` headers with the standard endpoint.
    - **Browser/Wallets**: Use a unique, per-user URL `.../wallet/<token>` because browser extensions cannot inject
      headers.
3.  **Transaction Flow**: You CANNOT just `wallet.sendTransaction`. You must pre-authorize every single transaction via
    the API before the wallet prompts the user.

## Deployment Rules

**Important**: Only whitelisted accounts can deploy contracts to Prividium chains, so not only an auth token is
required, but also the deployer address must be whitelisted by the chain administrator.

When writing deployment scripts (Foundry, Hardhat, Viem script):

- **Never** try to deploy without an auth token.
- **Method 1 (Recommended Typescript)**: Retrieve a token via the Prividium API and inject it into the `Authorization`
  header of your `JsonRpcProvider` or `Transport`.
- **Method 2 (CLI/Foundry)**: Use `cast` with `--headers "Authorization: Bearer <token>"`.
- **Method 3 (Local Proxy)**: Generally for human users, but if instructing a user, tell them to run
  `npx prividium proxy`.

## Web Application Logic (React/Next.js)

When generating code for a frontend application, you MUST follow this exact pattern.

### 1. Configuration

Use the `prividium` SDK. Do not try to reimplement the auth flow manually.

```typescript
import { createPrividiumChain } from 'prividium';

const prividium = createPrividiumChain({
  // ... config
  rpcUrl: 'https://YOUR-PRIVIDUM-ENDPOINT/rpc' // Base authenticated URL
  // ...
});
```

### 2. Reading Data (The "Read" Client)

**NEVER** use the `window.ethereum` or standard unauthenticated providers for reading data. It will fail with 401.

- **Correct**: Create a dedicated client using `prividium.transport`.

```typescript
import { createPublicClient } from 'viem';
import { prividium } from './config';

// âœ… This client has the Auth headers automatically injected
const readClient = createPublicClient({
  chain: prividium.chain,
  transport: prividium.transport
});
```

### 3. Writing Data (The Transaction Flow)

This is the most common failure point. You must strictly follow this 3-step process for **EVERY** transaction.

1.  **Pre-fetch**: Get nonce and gas estimates using the **Read Client** (authenticated).
2.  **Authorize**: Call `prividium.authorizeTransaction`.
3.  **Send**: Send via the **Wallet Client** (MetaMask, etc) using the pre-fetched values.

**Code Template:**

```typescript
// 1. Pre-fetch values using the AUTHENTICATED client
const nonce = await readClient.getTransactionCount({ address });
const gas = await readClient.estimateGas({ ...params });

// 2. Authorize the specific operation
await prividium.authorizeTransaction({
  walletAddress: address,
  contractAddress,
  nonce,
  calldata: encodedData,
  value
});

// 3. Send via Wallet (which uses the per-user /wallet/<token> endpoint)
const hash = await walletClient.sendTransaction({
  ...params,
  nonce, // MUST match the authorized nonce
  gas
});
```

## Common Debugging Responses

If a user reports an error, check these first:

- **Error: 401 Unauthorized during read**: They are likely using `window.ethereum` to read context. Tell them to use
  `prividium.transport`.
- **Error: "Wallet on wrong network"**: The user hasn't added the custom `/wallet/<token>` network. Ensure
  `prividium.addNetworkToWallet()` was called after login.
- **Error: Transaction fails instantly**: They likely skipped `prividium.authorizeTransaction()`.

## Smart Contract Considerations

- **Permissions**: After deployment, contracts default to **Forbidden**. You must instruct the user to go to the Admin
  Panel and whitelist the methods (or set to "All Users").
- **Constructor**: Standard constructors work, but remember the deployer address must be whitelisted.
